# filename: mypy.ini

[mypy]
python_version = 3.12
mypy_path = .

# ---------------------------------------------------------------------------
# Global strictness
# ---------------------------------------------------------------------------

ignore_missing_imports = True
namespace_packages = False

disallow_untyped_defs = True
disallow_untyped_calls = True
disallow_incomplete_defs = True
check_untyped_defs = True

no_implicit_optional = True
strict_equality = True

warn_unused_configs = True
warn_unused_ignores = True
warn_redundant_casts = True
warn_return_any = True
warn_unreachable = True

show_error_codes = True
pretty = True

# ---------------------------------------------------------------------------
# Exclude non‑production code
# ---------------------------------------------------------------------------

# Tests, mocks, fixtures, ansible, molecule, UI tests, integration tests
exclude = ^(tests|ansible)

# ---------------------------------------------------------------------------
# Typed third‑party modules — enforce strictness
# ---------------------------------------------------------------------------

[mypy-yaml.*]
ignore_missing_imports = False

[mypy-requests.*]
ignore_missing_imports = False

# ---------------------------------------------------------------------------
# Untyped third‑party modules — silence noise
# ---------------------------------------------------------------------------

# PySerial has no stubs and no py.typed marker
[mypy-serial]
ignore_missing_imports = True

[mypy-serial.*]
ignore_missing_imports = True
